<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>클로저</title>
</head>
<body>
    <h1>클로저</h1>
    오직 함수만 접근할 수 있는 비밀의 공간..........
    <pre>
        function makeAdder(x) {
            var y = 1;
            return function(z) {
                y = 100;
                return x + y + z;
            };
        }
        
        var add5 = makeAdder(5);
        var add10 = makeAdder(10);
        //클로저에 x와 y의 환경이 저장됨
        
        console.log(add5(2));  // 107 (x:5 + y:100 + z:2)
        console.log(add10(2)); // 112 (x:10 + y:100 + z:2)
        //함수 실행 시 클로저에 저장된 x, y값에 접근하여 값을 계산
        //지역스코프에서 값을 찾고, 없으면 그 밖에 있는 스코프에서 찾고, 계속해서 찾아 올라가 전역 스코프까지 찾아보는 것을 스코프체이닝

        function 제곱(x) {
            function 승수(y) {
                return y ** x
            }
        return 승수
    }
    
    var 제곱2 = 제곱(2);
    var 제곱3 = 제곱(3);
    
    제곱2(10)
    제곱3(10)

    function 제곱(x) {
        return function(y) {
                    return y ** x
            }
    }
    
    var 제곱2 = 제곱(2);
    var 제곱3 = 제곱(3);
    
    제곱2(10)
    제곱3(10)

    const x = 100;

function a() {
  const x = 1;
  b();
}

function b() {
  console.log(x);
}

a(); // 100
b(); // 100


// 비교대상

const xx = 100;

function a() {
  const xx = 1;
  function b() {
      console.log(xx);
  }
  b();
}

a();
    </pre>

    <script>
        function outer(){
            let age = 15;
            function inner(){
                return {
                    name : 'sohee',
                    age : age,
                    getAge: function  () {
                        return this.age
                    },
                    setAge: function  (val) {
                        this.age = val
                    } 
                }
            }
            return inner
        }

        let personMaker = outer();
        let person = personMaker();
        console.log(person);
        person.age;
    </script>
</body>
</html>